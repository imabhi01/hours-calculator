<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timesheet Hours Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50">
    <div class="min-h-screen py-8 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="text-center mb-8 fade-in">
                <div class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl shadow-lg mb-4">
                    <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>
                <h1 class="text-4xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent mb-2">
                    Timesheet Calculator
                </h1>
                <p class="text-gray-600 text-lg">Calculate your working hours with precision and elegance</p>
            </div>

            <!-- Main Content -->
            <div class="grid lg:grid-cols-2 gap-8">
                <!-- Input Section -->
                <div class="glass rounded-3xl shadow-xl p-8 fade-in">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-indigo-100 rounded-lg">
                            <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Input Data</h2>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Paste your timesheet data</label>
                            <textarea 
                                id="timesheetInput"
                                rows="16"
                                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 font-mono text-sm resize-none"
                                placeholder="1st: OFF
2nd: 0500 1100
3rd: 0500 1100 / 1900 2200
4th: 0700 1300
..."></textarea>
                        </div>

                        <div class="bg-indigo-50 border border-indigo-100 rounded-xl p-4">
                            <div class="flex items-start gap-2">
                                <svg class="w-5 h-5 text-indigo-600 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/>
                                </svg>
                                <div class="text-sm text-indigo-900">
                                    <p class="font-medium mb-1">Format Guide:</p>
                                    <ul class="space-y-1 text-indigo-700">
                                        <li>• Use "OFF" for days off</li>
                                        <li>• Separate multiple shifts with "/"</li>
                                        <li>• Times in 24-hour format (e.g., 0500, 1900)</li>
                                        <li>• Comments in parentheses are ignored</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="flex gap-3">
                            <button 
                                onclick="calculateHours()"
                                class="flex-1 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
                                <span class="flex items-center justify-center gap-2">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                                    </svg>
                                    Calculate Hours
                                </span>
                            </button>
                            <button 
                                onclick="clearAll()"
                                class="bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl transition-all duration-200">
                                Clear
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Results Section -->
                <div class="glass rounded-3xl shadow-xl p-8 fade-in">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="p-2 bg-purple-100 rounded-lg">
                            <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                            </svg>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Results</h2>
                    </div>

                    <div id="resultsContainer" class="h-full flex items-center justify-center">
                        <div class="text-center text-gray-400">
                            <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                            </svg>
                            <p class="text-lg font-medium">No data calculated yet</p>
                            <p class="text-sm mt-1">Enter your timesheet and click calculate</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let calculatedData = [];

        function timeToHours(start, end) {
            const startHour = parseInt(start.substring(0, 2));
            const startMin = parseInt(start.substring(2, 4));
            const endHour = parseInt(end.substring(0, 2));
            const endMin = parseInt(end.substring(2, 4));
            
            const startTotal = startHour + startMin / 60;
            const endTotal = endHour + endMin / 60;
            
            return endTotal - startTotal;
        }

        function calculateHours() {
            const input = document.getElementById('timesheetInput').value.trim();
            const resultsContainer = document.getElementById('resultsContainer');
            
            if (!input) {
                resultsContainer.innerHTML = `
                    <div class="bg-red-50 border-2 border-red-200 rounded-xl p-6 text-center">
                        <svg class="w-12 h-12 text-red-500 mx-auto mb-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <p class="text-red-800 font-medium">Please enter timesheet data</p>
                    </div>`;
                return;
            }

            try {
                const rows = [];
                const lines = input.split('\n').filter(line => line.trim());
                
                for (const line of lines) {
                    const colonIndex = line.indexOf(':');
                    if (colonIndex === -1) continue;
                    
                    const date = line.substring(0, colonIndex).trim();
                    let entry = line.substring(colonIndex + 1).trim();
                    
                    entry = entry.replace(/\([^)]*\)/g, '').trim();
                    
                    if (entry.toUpperCase() === 'OFF') {
                        rows.push({ date, timings: 'OFF', hours: 0 });
                        continue;
                    }
                    
                    let totalHours = 0;
                    const shifts = entry.split('/');
                    
                    for (const shift of shifts) {
                        const times = shift.match(/\d{4}/g);
                        if (times && times.length === 2) {
                            totalHours += timeToHours(times[0], times[1]);
                        }
                    }
                    
                    rows.push({ 
                        date, 
                        timings: entry, 
                        hours: Math.round(totalHours * 100) / 100 
                    });
                }
                
                calculatedData = rows;
                const monthlyTotal = rows.reduce((sum, row) => sum + row.hours, 0);
                
                displayResults(rows, monthlyTotal);
            } catch (error) {
                resultsContainer.innerHTML = `
                    <div class="bg-red-50 border-2 border-red-200 rounded-xl p-6">
                        <div class="flex items-start gap-3">
                            <svg class="w-6 h-6 text-red-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            <div>
                                <p class="text-red-800 font-medium">Error processing data</p>
                                <p class="text-red-600 text-sm mt-1">${error.message}</p>
                            </div>
                        </div>
                    </div>`;
            }
        }

        function displayResults(rows, monthlyTotal) {
            const resultsContainer = document.getElementById('resultsContainer');
            
            let html = `
                <div class="space-y-6 w-full">
                    <!-- Total Hours Card -->
                    <div class="bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl p-6 text-white shadow-lg">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-indigo-100 text-sm font-medium uppercase tracking-wide mb-1">Total Hours</p>
                                <p class="text-5xl font-bold">${monthlyTotal.toFixed(2)}</p>
                            </div>
                            <div class="bg-white bg-opacity-20 rounded-xl p-4">
                                <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Data Table -->
                    <div class="bg-white rounded-2xl border-2 border-gray-100 overflow-hidden">
                        <div class="overflow-x-auto max-h-96 overflow-y-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 sticky top-0">
                                    <tr>
                                        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Date</th>
                                        <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Timings</th>
                                        <th class="px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider">Hours</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-100">`;
            
            rows.forEach((row, index) => {
                html += `
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-4 py-3 text-sm font-medium text-gray-900">${row.date}</td>
                        <td class="px-4 py-3 text-sm text-gray-600 font-mono">${row.timings}</td>
                        <td class="px-4 py-3 text-sm font-semibold text-right ${row.hours === 0 ? 'text-gray-400' : 'text-indigo-600'}">${row.hours.toFixed(2)}</td>
                    </tr>`;
            });
            
            html += `
                                    <tr class="bg-indigo-50 font-bold">
                                        <td class="px-4 py-4 text-sm text-indigo-900">TOTAL</td>
                                        <td class="px-4 py-4"></td>
                                        <td class="px-4 py-4 text-sm text-right text-indigo-900">${monthlyTotal.toFixed(2)}</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Export Buttons -->
                    <div class="flex gap-3">
                        <button 
                            onclick="exportCSV()"
                            class="flex-1 bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
                            <span class="flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                                Export CSV
                            </span>
                        </button>
                        <button 
                            onclick="exportJSON()"
                            class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-xl shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
                            <span class="flex items-center justify-center gap-2">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"/>
                                </svg>
                                Export JSON
                            </span>
                        </button>
                    </div>
                </div>`;
            
            resultsContainer.innerHTML = html;
        }

        function exportCSV() {
            if (calculatedData.length === 0) {
                alert('Please calculate hours first');
                return;
            }
            
            let csv = 'Date,Timings,Total Hours\n';
            for (const row of calculatedData) {
                csv += `"${row.date}","${row.timings}",${row.hours}\n`;
            }
            
            const total = calculatedData.reduce((sum, row) => sum + row.hours, 0);
            csv += `"TOTAL","",${total.toFixed(2)}\n`;
            
            downloadFile(csv, 'monthly_hours.csv', 'text/csv');
        }

        function exportJSON() {
            if (calculatedData.length === 0) {
                alert('Please calculate hours first');
                return;
            }
            
            const total = calculatedData.reduce((sum, row) => sum + row.hours, 0);
            const data = {
                entries: calculatedData,
                total: total.toFixed(2)
            };
            
            downloadFile(JSON.stringify(data, null, 2), 'monthly_hours.json', 'application/json');
        }

        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
        }

        function clearAll() {
            document.getElementById('timesheetInput').value = '';
            document.getElementById('resultsContainer').innerHTML = `
                <div class="h-full flex items-center justify-center">
                    <div class="text-center text-gray-400">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        <p class="text-lg font-medium">No data calculated yet</p>
                        <p class="text-sm mt-1">Enter your timesheet and click calculate</p>
                    </div>
                </div>`;
            calculatedData = [];
        }

        // Load sample data on page load
        window.addEventListener('load', () => {
            const sampleData = `1st: OFF
2nd: 0500 1100
3rd: 0500 1100 / 1900 2200
4th: 0700 1300
5th: 0500 1100 / 1900 2200`;
            document.getElementById('timesheetInput').value = sampleData;
        });
    </script>
</body>
</html>